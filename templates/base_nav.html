{% extends 'base.html' %}
{% load static %}
{% load profile_extras %}
{% block styles %}
    <style>
        .nav-item .active {
            background-color: #e74c32 !important;
            color: white !important;
        }

        .nav-item:hover {
            background-color: #3a3b45 !important;
        }

        .collapse-item {
            color: #ffffffcc !important;
        }

        .collapse-item:hover {
            background-color: #3a3b45 !important;
            color: white;
        }
    </style>
{% endblock %}
{% block sidenav %}
    <nav class="navbar navbar-dark align-items-start sidebar sidebar-dark
    accordion p-0" style="background-color: #0c0b0b"
         id="page-top">
        <div class="container-fluid d-flex flex-column p-0">
            <div style="width: 100%">
                <a class="d-flex justify-content-center align-items-center
                sidebar-brand mt-4 mb-4"
                   href="{% url 'home' %}">
                    <img src="{% static "img/logos/logo_alt.svg" %}"
                         style="width: 50%">
                </a>
            </div>
            <hr class="sidebar-divider my-0">
            <ul class="nav navbar-nav text-light" id="accordionSidebar">
                {% if request.user|has_group:"Company Superusers" %}
                    <li class="nav-item" role="presentation">
                        <a class="nav-link" href="{% url 'dashboard' %}">
                            <i
                                    class="fas fa-tachometer-alt"></i>&nbsp;<span>Dashboard</span>
                        </a>
                    </li>
                {% endif %}

                <li class="nav-item" role="presentation">
                    <a class="nav-link"
                       href="{% url 'profile' %}"><i
                            class="fas fa-user"></i>&nbsp;<span>Profile</span></a>
                </li>
                <li class="nav-item" role="presentation">
                    <a class="nav-link"
                       href="{% url 'messages' %}"><i
                            class="fas fa-envelope"></i>&nbsp;<span>Messages</span></a>
                </li>
                <li class="nav-item" role="presentation">
                    <a class="nav-link"
                       href="{% url 'team' %}"><i
                            class="fas fa-users"></i>&nbsp;<span>Team</span></a>
                </li>
                <li class="nav-item" role="presentation">
                    <a class="nav-link"
                       href="{% url 'items' %}"><i
                            class="fas fa-cogs"></i>&nbsp;<span>Items</span></a>
                </li>

                {% if request.user|has_group:"Company Admins" or request.user|has_group:"Company Superusers" %}
                    <li class="nav-item" role="presentation">
                        <div>
                            <a class="nav-link collapsed"
                               data-toggle="collapse" aria-expanded="true"
                               aria-controls="employeegroup"
                               href="#employeegroup" style="">
                                <i class="fas fa-users-cog"></i>&nbsp;
                                <span>Manage Employees</span>
                            </a>
                            <div class="collapse" id="employeegroup"
                                 data-parent="#accordionSidebar">
                                <div class="rounded py-1 collapse-inner"
                                     style="background-color: #0c0b0b">
                                    <a class="collapse-item"
                                       href="{% url 'add_employee' %}">Add
                                        Employee</a>
                                    <a class="collapse-item"
                                       href="{% url 'add_location' %}">Add
                                        Location</a>
                                </div>
                            </div>
                        </div>
                    </li>
                    <li class="nav-item" role="presentation">
                        <div>
                            <a class="nav-link collapsed"
                               data-toggle="collapse" aria-expanded="true"
                               aria-controls="inventorygroup"
                               href="#inventorygroup" style="">
                                <i class="fa fa-warehouse"></i>&nbsp;
                                <span>Manage Inventory Items</span>
                            </a>
                            <div class="collapse" id="inventorygroup"
                                 data-parent="#accordionSidebar">
                                <div class="rounded py-1 collapse-inner"
                                     style="background-color: #0c0b0b">
                                    <a class="collapse-item"
                                       href="{% url 'add_category' %}">Add
                                        Category</a>
                                    <a class="collapse-item"
                                       href="{% url 'add_item' %}">Add Item</a>
                                </div>
                            </div>
                        </div>
                    </li>
                    <li class="nav-item" role="presentation">
                        <div>
                            <a class="nav-link collapsed"
                               data-toggle="collapse" aria-expanded="true"
                               aria-controls="suppliergroup"
                               href="#suppliergroup" style="">
                                <i class="fas fa-road"></i>&nbsp;
                                <span>Manage Suppliers</span>
                            </a>
                            <div class="collapse" id="suppliergroup"
                                 data-parent="#accordionSidebar">
                                <div class="rounded py-1 collapse-inner"
                                     style="background-color: #0c0b0b">
                                    <a class="collapse-item"
                                       href="{% url 'add_supplier' %}">Add
                                        Supplier</a>
                                    <a class="collapse-item"
                                       href="{% url 'suppliers' %}">Suppliers</a>
                                    <a class="collapse-item"
                                       href="{% url 'purchase_orders' %}">Purchase
                                        Orders</a>
                                </div>
                            </div>
                        </div>
                    </li>
                    <li class="nav-item" role="presentation"><a
                            class="nav-link"
                            href="{% url 'item_requests' %}">
                        <i class="fas fa-calendar-week"></i>&nbsp;
                        <span>Item Requests</span></a>
                    </li>
                {% endif %}
            </ul>
            <div class="text-center d-none d-md-inline">
                <button class="btn rounded-circle border-0" id="sidebarToggle"
                        type="button"></button>
            </div>
        </div>
    </nav>
{% endblock %}

{% block topnav %}
    <nav class="navbar navbar-light navbar-expand bg-white shadow mb-4 topbar static-top">
        <div class="container-fluid">
            <button class="btn btn-link d-md-none rounded-circle mr-3 text-danger"
                    id="sidebarToggleTop"
                    type="button"><i class="fas fa-bars"></i></button>
            <form class="form-inline d-none d-sm-inline-block mr-auto ml-md-3 my-2 my-md-0 mw-100 navbar-search">
                {#                <div class="input-group"><input#}
                {#                        class="bg-light form-control border-0 small"#}
                {#                        type="text"#}
                {#                        placeholder="Search for ...">#}
                {#                    <div class="input-group-append">#}
                {#                        <button class="btn btn-primary py-0" type="button"><i#}
                {#                                class="fas fa-search"></i></button>#}
                {#                    </div>#}
                {#                </div>#}
            </form>
            <ul class="nav navbar-nav flex-nowrap ml-auto">
                <li class="nav-item dropdown no-arrow mx-1"
                    role="presentation">
                    <div class="nav-item dropdown no-arrow"><a
                            class="dropdown-toggle nav-link"
                            data-toggle="dropdown"
                            aria-expanded="false" href="#"><span
                            class="badge badge-danger badge-counter">{{ alerts|count }}</span><i
                            class="fas fa-bell fa-fw"></i></a>
                        <div class="dropdown-menu dropdown-menu-right dropdown-list dropdown-menu-right animated--grow-in"
                             role="menu">
                            <h6 class="dropdown-header">alerts center</h6>
                            {% for alert in alerts|slice:":5" %}
                                <a class="d-flex align-items-center dropdown-item"
                                   href="{% url 'message' alert.id %}">
                                    <div class="mr-3">
                                        <div class="bg-primary icon-circle"><i
                                                class="fas fa-file-alt text-white"></i>
                                        </div>
                                    </div>
                                    <div><span
                                            class="small text-gray-500">{{ alert.date_sent }}</span>
                                        <p>{{ alert.text|truncatechars:30 }}</p>
                                    </div>
                                </a>
                            {% endfor %}

                            <a class="text-center dropdown-item small text-gray-500"
                               href="{% url 'messages' %}">Show All Alerts</a>
                        </div>
                    </div>
                </li>
                <li class="nav-item dropdown no-arrow mx-1"
                    role="presentation">
                    <div class="nav-item dropdown no-arrow"><a
                            class="dropdown-toggle nav-link"
                            data-toggle="dropdown"
                            aria-expanded="false" href="#"><i
                            class="fas fa-envelope fa-fw"></i><span
                            class="badge badge-danger badge-counter">{{ unread_messages|count }}</span></a>
                        <div class="dropdown-menu dropdown-menu-right dropdown-list dropdown-menu-right animated--grow-in"
                             role="menu">
                            <h6 class="dropdown-header">Inbox</h6>
                            {% for message in unread_messages|slice:":5" %}
                                <a class="d-flex align-items-center dropdown-item"
                                   href="{% url 'message' message.id %}">
                                    <div class="dropdown-list-image mr-3"><img
                                            class="rounded-circle"
                                            alt="{{ message.from_user.get_full_name }} profile picture"
                                            src="










                                                    {{ MEDIA_URL }}{{ message.from_user.employee.image|urlencode }}">
                                        <div class="bg-success status-indicator"></div>
                                    </div>
                                    <div class="font-weight-bold">
                                        <div class="text-truncate">
                                            <span>{{ message.text }}</span>
                                        </div>
                                        <p class="small text-gray-500 mb-0">{{ message.from_user.first_name }} {{ message.from_user.last_name }}
                                            - {{ message.date_sent|timesince }}</p>
                                    </div>
                                </a>
                            {% endfor %}

                            <a class="text-center dropdown-item small text-gray-500"
                               href="{% url 'messages' %}">Show
                                All Messages</a>
                        </div>
                    </div>
                    <div class="shadow dropdown-list dropdown-menu dropdown-menu-right"
                         aria-labelledby="alertsDropdown"></div>
                </li>
                <div class="d-none d-sm-block topbar-divider"></div>
                <li class="nav-item dropdown no-arrow" role="presentation">
                    <div class="nav-item dropdown no-arrow"><a
                            class="dropdown-toggle nav-link"
                            data-toggle="dropdown"
                            aria-expanded="false" href="#"><span
                            class="d-none d-lg-inline mr-2 text-gray-600 small">{{ request.user.first_name }}
                        {{ request.user.last_name }}</span><img
                            class="border rounded-circle img-profile"
                            src="










                                    {{ MEDIA_URL }}{{ request.user.employee.image|urlencode }}"
                            alt="{{ request.user.get_full_name }} profile picture"></a>
                        <div class="dropdown-menu shadow dropdown-menu-right animated--grow-in"
                             role="menu">
                            <a class="dropdown-item" role="presentation"
                               href="{% url 'profile' %}"><i
                                    class="fas fa-user fa-sm fa-fw mr-2 text-gray-400"></i>&nbsp;Profile</a><a
                                class="dropdown-item" role="presentation"
                                href="{% url 'home' %}"><i
                                class="fas fa-home fa-sm fa-fw mr-2
                                text-gray-400"></i>&nbsp;Home</a>
                            <div class="dropdown-divider"></div>
                            <a class="dropdown-item" role="presentation"
                               href="{% url 'logout' %}"><i
                                    class="fas fa-sign-out-alt fa-sm fa-fw mr-2 text-gray-400"></i>&nbsp;Logout</a>
                        </div>
                    </div>
                </li>
            </ul>
        </div>
    </nav>
{% endblock %}
{% block scripts %}
    <script type="application/javascript">
        $(document).ready(function () {
            var pathname = window.location.pathname;
            var onDomain = true;
            $("#page-top div ul li a").each(function () {
                var href = $(this).attr("href");
                if (href !== undefined && pathname.indexOf(href) >= 0) {
                    $(this).addClass("active");
                    $(this).parent().parent().addClass("show");
                    $(this).parent().parent().siblings("a").removeClass("collapsed")
                    onDomain = false;
                }
            });
            if (onDomain) {
                $("#page-top div ul li:first-child a").addClass("active");
            }
        });
    </script>
{% endblock %}